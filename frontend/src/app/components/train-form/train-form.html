<div class="container">
  <h1 class="heading">Add/edit Train details</h1>
  <form class="form" [formGroup]="trainForm" (ngSubmit)="onSubmit()">

    <div class="form-group">
      <label for="trainNumber">Train Number</label>
      <input type="text" 
             class="form-control" 
             id="trainNumber" 
             name="trainNumber" 
             formControlName="trainNumber" 
             required
             [class.invalid]="isFieldInvalid('trainNumber')">
      @if (isFieldInvalid('trainNumber')) {
        <div class="text-danger">
            Train Number must be 5-10 characters
        </div>
      }
    </div><br>

    <div class="form-group">
      <label for="trainLine">Train Line</label>
      <input type="text" 
             class="form-control" 
             id="trainLine" 
             name="trainLine" 
             formControlName="trainLine" 
             required
             [class.invalid]="isFieldInvalid('trainLine')">
      @if (isFieldInvalid('trainLine')) {
        <div class="text-danger">
            Enter the line for this train (minimum 2 characters)
        </div>
      }
    </div><br>

    <!-- Updated to use StationSearchComponent -->
    <div class="form-group">
      <app-station-search
        label="Search and select Train Departure Station"
        id="trainDepartureStation"
        placeholder="Type to search for departure station..."
        stationType="train"
        formControlName="trainDepartureStation">
      </app-station-search>
      @if (isFieldInvalid('trainDepartureStation')) {
        <div class="text-danger">
            Please select a departure station
        </div>
      }
    </div><br>

    <!-- Updated to use StationSearchComponent -->
    <div class="form-group">
      <app-station-search
        label="Search and select Train Arrival Station"
        id="trainArrivalStation"
        placeholder="Type to search for arrival station..."
        stationType="train"
        formControlName="trainArrivalStation">
      </app-station-search>
      @if (isFieldInvalid('trainArrivalStation')) {
        <div class="text-danger">
            Please select an arrival station
        </div>
      }
    </div><br>

    <!-- Date Dropdown Components -->
    <div class="form-group">
      <app-date-input
        label="train Departure Date"
        id="trainDepartureDate"
        formControlName="trainDepartureDate">
      </app-date-input>
      @if (isFieldInvalid('trainDepartureDate')) {
        <div class="text-danger">Please select the departure date</div>
      }
    </div><br>

    <div class="form-group">
      <app-date-input
        label="train Arrival Date"
        id="trainArrivalDate"
        formControlName="trainArrivalDate">
      </app-date-input>
      @if (isFieldInvalid('trainArrivalDate')) {
        <div class="text-danger">Please select the arrival date</div>
      }
    </div><br>

    <!-- Time Dropdown Components -->
    <div class="form-group">
      <app-time-dropdown
        label="train Departure Time"
        id="trainDepartureTime"
        formControlName="trainDepartureTime">
      </app-time-dropdown>
      @if (isFieldInvalid('trainDepartureTime')) {
        <div class="text-danger">Please select the departure time</div>
      }
    </div><br>

    <div class="form-group">
      <app-time-dropdown
        label="train Arrival Time"
        id="trainArrivalTime"
        formControlName="trainArrivalTime">
      </app-time-dropdown>
      @if (isFieldInvalid('trainArrivalTime')) {
        <div class="text-danger">Please select the arrival time</div>
      }
    </div><br>

    <!-- Duration Dropdown Component -->
    <div class="form-group">
      <app-duration-dropdown
        label="train Ride Duration"
        id="trainRideDuration"
        formControlName="trainRideDuration">
      </app-duration-dropdown>
      @if (isFieldInvalid('trainRideDuration')) {
        <div class="text-danger">Please enter the estimated travel time</div>
      }
    </div><br>

    <div class="form-group">
      <label for="trainRidePrice">train Ride Price</label>
      <input type="number" 
             class="form-control" 
             id="trainRidePrice" 
             formControlName="trainRidePrice" 
             required
             min="0"
             step="0.01"
             [class.invalid]="isFieldInvalid('trainRidePrice')">
      @if (isFieldInvalid('trainRidePrice')) {
        <div class="text-danger">
            Enter a valid price (minimum $0)
        </div>
      }
    </div><br>

    <button type="submit" 
            class="btn btn-primary" 
            [disabled]="trainForm.invalid">
        Submit
    </button>

    @if (submitMessage) {
      <div class="mt-3">
        <div [class]="submitSuccess ? 'alert alert-success' : 'alert alert-danger'">
          {{ submitMessage }}
        </div>
      </div>
    }
  </form>
</div>